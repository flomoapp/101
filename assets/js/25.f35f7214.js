(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{400:function(s,t,r){"use strict";r.r(t);var a=r(46),o=Object(a.a)({},(function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h1",{attrs:{id:"飞书-to-flomo"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#飞书-to-flomo"}},[s._v("#")]),s._v(" 飞书 to flomo")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu_logo.jpg",alt:""}}),s._v("\nmade by "),r("a",{attrs:{href:"https://sspai.com/post/70971",target:"_blank",rel:"noopener noreferrer"}},[s._v("白宦成"),r("OutboundLink")],1),s._v(" with ❤")]),s._v(" "),r("h1",{attrs:{id:"基本信息"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#基本信息"}},[s._v("#")]),s._v(" "),r("strong",[s._v("基本信息")])]),s._v(" "),r("p",[s._v("本教程需要使用"),r("a",{attrs:{href:"https://feishu.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("飞书账号"),r("OutboundLink")],1),s._v("、"),r("a",{attrs:{href:"https://qingfuwu.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("轻服务账号"),r("OutboundLink")],1),s._v("以及 "),r("a",{attrs:{href:"https://help.flomoapp.com/advance/api.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("flomo Pro"),r("OutboundLink")],1),s._v(" 的权限，请先自行注册相应的账号。")]),s._v(" "),r("p",[s._v("最终效果如下：")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu000.jpeg",alt:""}})]),s._v(" "),r("h1",{attrs:{id:"获取-flomo-api-地址"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#获取-flomo-api-地址"}},[s._v("#")]),s._v(" "),r("strong",[s._v("获取 flomo API 地址")])]),s._v(" "),r("p",[s._v("在飞书当中接入 flomo，需要使用 flomo Pro 提供的 API 来实现。因此，你需要访问 flomo 的 「"),r("a",{attrs:{href:"https://flomoapp.com/mine?source=incoming_webhook",target:"_blank",rel:"noopener noreferrer"}},[s._v("API 及第三方工具"),r("OutboundLink")],1),s._v("」页面，复制你的 API 链接，并留存下来，我们稍后会用到。")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu001.jpeg",alt:""}})]),s._v(" "),r("h1",{attrs:{id:"创建飞书机器人"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#创建飞书机器人"}},[s._v("#")]),s._v(" "),r("strong",[s._v("创建飞书机器人")])]),s._v(" "),r("p",[s._v("首先，打开 "),r("strong",[r("a",{attrs:{href:"https://open.feishu.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("飞书开放平台"),r("OutboundLink")],1)]),s._v(" ，使用你的飞书账号登陆，点击首页的「创建应用」，进入到应用的创建页面，创建一个新的 "),r("strong",[s._v("「企业自建应用」。")])]),s._v(" "),r("p",[r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu002.jpeg",alt:""}})]),s._v(" "),r("p",[s._v("创建完成后，点击你创建好的 Flomo Pro 应用，进入应用详情，找到左侧菜单的 "),r("strong",[s._v("「凭证与基础」")]),s._v(" ，找到你的 "),r("strong",[s._v("App ID")]),s._v(" 和 "),r("strong",[s._v("App Secret")]),s._v("，将这两个值记录下来，后续会用到。此外，打开左侧菜单中的「"),r("strong",[s._v("事件订阅")]),s._v("」，找到 "),r("strong",[s._v("Verification Token")]),s._v(" ，将这个值记录下来，后续会用到。")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu003.jpeg",alt:""}})]),s._v(" "),r("p",[s._v("此外，你还需要点击左侧 Tab 中「"),r("strong",[s._v("应用功能")]),s._v("」中的「"),r("strong",[s._v("机器人")]),s._v("」页面，开启机器人功能。")]),s._v(" "),r("h1",{attrs:{id:"创建轻服务应用"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#创建轻服务应用"}},[s._v("#")]),s._v(" "),r("strong",[s._v("创建轻服务应用")])]),s._v(" "),r("p",[s._v("打开轻服务网站，登陆管理控制台")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu004.jpeg",alt:""}})]),s._v(" "),r("p",[s._v("创建一个新的服务，这里需要选择 "),r("strong",[s._v("Node.js 应用")]),s._v(" 来进行创建。创建完成后，进入到服务内部。")]),s._v(" "),r("p",[s._v("在服务内部点击左侧的 "),r("strong",[s._v("「设置」")]),s._v("，进入到设置页面，在设置页面中找到 "),r("strong",[s._v("「小程序设置」")]),s._v("，配置其中的 "),r("strong",[s._v("「飞书小程序/机器人」")]),s._v("，将刚刚保存的 App ID 、App Secret 填写到这里并保存。\n"),r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu005.jpeg",alt:""}})]),s._v(" "),r("h1",{attrs:{id:"编写代码-安装依赖-并上线函数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#编写代码-安装依赖-并上线函数"}},[s._v("#")]),s._v(" "),r("strong",[s._v("编写代码，安装依赖，并上线函数")])]),s._v(" "),r("h3",{attrs:{id:"复制代码"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#复制代码"}},[s._v("#")]),s._v(" "),r("strong",[s._v("复制代码")])]),s._v(" "),r("p",[s._v("打开"),r("a",{attrs:{href:"https://qingfuwu.cn/share/qcrzp2pag9ez6wwuwb",target:"_blank",rel:"noopener noreferrer"}},[s._v("代码页面"),r("OutboundLink")],1),s._v("，复制代码，并在你自己的云函数界面创建同名文件，粘贴对应的内容。\n"),r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu006.jpeg",alt:""}})]),s._v(" "),r("h3",{attrs:{id:"安装依赖"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[s._v("#")]),s._v(" "),r("strong",[s._v("安装依赖")])]),s._v(" "),r("p",[s._v("粘贴代码后，点击左下角 「"),r("strong",[s._v("NPM 管理")]),s._v("」中输入框右侧的搜索按钮，在弹出的搜索框中输入 "),r("em",[r("strong",[s._v("axios")])]),s._v(" ，安装 "),r("em",[r("strong",[s._v("axios")])]),s._v(" 依赖。")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu007.jpeg",alt:""}})]),s._v(" "),r("h3",{attrs:{id:"配置环境变量"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置环境变量"}},[s._v("#")]),s._v(" "),r("strong",[s._v("配置环境变量")])]),s._v(" "),r("p",[s._v("安装完成后,点击右上角配置框中的环境变量，填入***VERIFICATION_TOKEN*** 和 "),r("em",[r("strong",[s._v("FLOMO_API")])]),s._v(" 以及对应的值：")]),s._v(" "),r("ul",[r("li",[r("strong",[s._v("VERIFICATION_TOKEN")]),s._v(" ：飞书开放平台中，「事件订阅」tab 中的 Verification Token。")]),s._v(" "),r("li",[r("strong",[s._v("FLOMO_API")]),s._v(" ：flomo 的 api ，可以从 **"),r("a",{attrs:{href:"https://flomoapp.com/mine?source=incoming_webhook",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),r("OutboundLink")],1),s._v("**获取")])]),s._v(" "),r("h3",{attrs:{id:"上线函数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#上线函数"}},[s._v("#")]),s._v(" "),r("strong",[s._v("上线函数")])]),s._v(" "),r("p",[s._v("完成上述的代码配置、依赖安装以及环境变量配置后，接下来需要对函数进行上线操作。点击上方的函数"),r("strong",[s._v("上线按钮")]),s._v("，即可将当前函数执行上线。")]),s._v(" "),r("p",[s._v("上线完成后，你会获得一个函数的调用地址，复制这个调用地址。")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu008.jpeg",alt:""}})]),s._v(" "),r("h1",{attrs:{id:"配置飞书机器人权限和-api-地址"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置飞书机器人权限和-api-地址"}},[s._v("#")]),s._v(" "),r("strong",[s._v("配置飞书机器人权限和 API 地址")])]),s._v(" "),r("h3",{attrs:{id:"配置-api-地址"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置-api-地址"}},[s._v("#")]),s._v(" "),r("strong",[s._v("配置 API 地址")])]),s._v(" "),r("p",[s._v("完成了函数上线之后，接下来我们到飞书开放平台进行配置。")]),s._v(" "),r("p",[s._v("找到你刚刚创建的飞书应用，点击左侧边栏中的 "),r("strong",[s._v("「事件订阅」")]),s._v("，在事件订阅页面配置请求网址，在请求网址中粘贴刚刚复制的函数调用地址。\n"),r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu009.jpeg",alt:""}})]),s._v(" "),r("h3",{attrs:{id:"配置事件并申请权限"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置事件并申请权限"}},[s._v("#")]),s._v(" "),r("strong",[s._v("配置事件并申请权限")])]),s._v(" "),r("p",[s._v("配置好请求网址 URL 后，点击下方的添加事件，在其中选择「"),r("strong",[s._v("接受消息 v2.0")]),s._v("」\n"),r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu010.jpeg",alt:""}})]),s._v(" "),r("p",[s._v("添加事件后，会自动提醒你需要申请相应的权限， 点击权限名称即可在弹出的窗口中申请权限。这里需要申请「读取用户发给机器人的单聊消息」和「获取用户在群聊中@机器人的消息」两个权限。")]),s._v(" "),r("p",[s._v("此外，你还需要在权限管理中申请「"),r("strong",[s._v("以应用的身份发消息")]),s._v("」这个权限。")]),s._v(" "),r("h1",{attrs:{id:"提交审核并发布机器人"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#提交审核并发布机器人"}},[s._v("#")]),s._v(" "),r("strong",[s._v("提交审核并发布机器人")])]),s._v(" "),r("p",[s._v("完成各项配置后，点击左侧 Tab 中的「"),r("strong",[s._v("版本管理与发布")]),s._v("」，并创建一个新的版本，填写各项基本信息。")]),s._v(" "),r("p",[s._v("需要注意的是，因为我们在这里没有添加鉴权的部分，所以需要设定可见权限为你自己，避免被其他人录入奇怪的信息。\n"),r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu011.jpeg",alt:""}})]),s._v(" "),r("p",[s._v("完成填写后，「"),r("strong",[s._v("保存")]),s._v("」并「"),r("strong",[s._v("申请发布")]),s._v("」，等待审核通过后，你的机器人就可以在飞书当中使用啦～\n"),r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu012.jpeg",alt:""}})]),s._v(" "),r("h1",{attrs:{id:"在飞书上测试机器人"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#在飞书上测试机器人"}},[s._v("#")]),s._v(" "),r("strong",[s._v("在飞书上测试机器人")])]),s._v(" "),r("p",[s._v("当你的飞书机器人发布成功后，接下来你就可以给 Flomo 机器人发消息了，比如，发个 "),r("code",[s._v("#轻服务 Hi,你好，轻服务")]),s._v(" 试试看吧？")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu013.jpeg",alt:""}}),s._v(" "),r("img",{attrs:{src:"https://flomo-resource.oss-cn-shanghai.aliyuncs.com/101/feishu014.jpeg",alt:""}})])])}),[],!1,null,null,null);t.default=o.exports}}]);